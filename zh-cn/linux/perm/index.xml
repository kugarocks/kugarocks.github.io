<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>权限管理 on kugarocks</title><link>https://www.kugarocks.com/zh-cn/linux/perm/</link><description>Recent content in 权限管理 on kugarocks</description><generator>Hugo</generator><language>zh-cn</language><copyright>Copyright (c) 2020-2024 Thulite</copyright><lastBuildDate>Thu, 29 Aug 2024 20:00:00 +0800</lastBuildDate><atom:link href="https://www.kugarocks.com/zh-cn/linux/perm/index.xml" rel="self" type="application/rss+xml"/><item><title>用户管理</title><link>https://www.kugarocks.com/zh-cn/linux/perm/user-mgmt/</link><pubDate>Tue, 27 Aug 2024 20:00:00 +0800</pubDate><guid>https://www.kugarocks.com/zh-cn/linux/perm/user-mgmt/</guid><description>&lt;h2 id="用户账号">用户账号&lt;/h2>
&lt;h3 id="etcpasswd">/etc/passwd&lt;/h3>
&lt;p>Linux 使用 &lt;code>/etc/passwd&lt;/code> 文件来保存用户账号信息。
因为许多服务进程需要读取用户账号的信息，可以看到这个文件的权限都是可读的。&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2010&lt;/span> Aug &lt;span class="m">24&lt;/span> 15:12 /etc/passwd&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;p>查看某个用户的账号信息。&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep kuga /etc/passwd&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kuga:x:1000:1000:,,,:/home/kuga:/bin/bash&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">KEY&lt;/th>
 &lt;th style="text-align: left">VALUE&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">用户名&lt;/td>
 &lt;td style="text-align: left">kuga&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">用户密码&lt;/td>
 &lt;td style="text-align: left">x&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">用户 ID&lt;/td>
 &lt;td style="text-align: left">1000&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">用户组 ID&lt;/td>
 &lt;td style="text-align: left">1000&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">备注字段&lt;/td>
 &lt;td style="text-align: left">,,,&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">目录位置&lt;/td>
 &lt;td style="text-align: left">/home/kuga&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">默认 Shell&lt;/td>
 &lt;td style="text-align: left">/bin/bash&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>系统会预留一定的 UID 范围，Ubuntu 新添加的用户 ID 从 1000 开始。
下面的命令会按第 3 个字段 UID 逆序排序，然后输出前 10 行，只显示 136 字段（用户名，UID，目录位置）。&lt;/p></description></item><item><title>组管理</title><link>https://www.kugarocks.com/zh-cn/linux/perm/group-mgmt/</link><pubDate>Tue, 27 Aug 2024 20:00:00 +0800</pubDate><guid>https://www.kugarocks.com/zh-cn/linux/perm/group-mgmt/</guid><description>&lt;h2 id="用户和组的关系">用户和组的关系&lt;/h2>
&lt;h3 id="主组---primary-group">主组 - Primary Group&lt;/h3>
&lt;p>创建用户的时候，会同时创建一个同名组，这个就是主组。&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep soda /etc/passwd&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">soda:x:1001:1001:,,,:/home/soda:/bin/bash&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;p>第 4 个字段表示主组 ID 1001，还可以使用 groups 命令查看。&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">groups soda&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">soda : soda&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;h3 id="附加组---secondary-groups">附加组 - Secondary Groups&lt;/h3>
&lt;p>用户还可以属于多个附加组，用于权限的访问控制。&lt;/p></description></item><item><title>文件权限</title><link>https://www.kugarocks.com/zh-cn/linux/perm/file-perm/</link><pubDate>Tue, 27 Aug 2024 20:00:00 +0800</pubDate><guid>https://www.kugarocks.com/zh-cn/linux/perm/file-perm/</guid><description>&lt;h2 id="组成结构">组成结构&lt;/h2>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">-rwxr-xr--&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;p>第一个字符表示文件的类型：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>-&lt;/code>&lt;/strong>：文件，如文本文件、二进制文件等。&lt;/li>
&lt;li>&lt;strong>&lt;code>d&lt;/code>&lt;/strong>：目录。&lt;/li>
&lt;li>&lt;strong>&lt;code>l&lt;/code>&lt;/strong>：符号链接，Symbolic link (Soft link)。&lt;/li>
&lt;li>&lt;strong>&lt;code>b&lt;/code>&lt;/strong>：块设备，如硬盘、光盘等。&lt;/li>
&lt;li>&lt;strong>&lt;code>c&lt;/code>&lt;/strong>：字符设备，如终端设备、键盘等。&lt;/li>
&lt;li>&lt;strong>&lt;code>p&lt;/code>&lt;/strong>：管道，进程间通信。&lt;/li>
&lt;li>&lt;strong>&lt;code>s&lt;/code>&lt;/strong>：套接字，网络通信，进程间数据交换。&lt;/li>
&lt;/ul>
&lt;p>后面的字符 3 个为一组（r=可读、w=可写、x=可执行），分别对应：&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">类别&lt;/th>
 &lt;th style="text-align: left">权限&lt;/th>
 &lt;th style="text-align: left">描述&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">拥有者&lt;/td>
 &lt;td style="text-align: left">&lt;code>rwx&lt;/code>&lt;/td>
 &lt;td style="text-align: left">可读/可写/可执行&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">用户组&lt;/td>
 &lt;td style="text-align: left">&lt;code>r-x&lt;/code>&lt;/td>
 &lt;td style="text-align: left">可读/不可写/可执行&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">其它人&lt;/td>
 &lt;td style="text-align: left">&lt;code>r--&lt;/code>&lt;/td>
 &lt;td style="text-align: left">可读/不可写/不可执行&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="目录的可执行权限">目录的可执行权限&lt;/h2>
&lt;p>和文件的可执行权限一样，如果要对目录进行操作，目录也必须有可执行权限。&lt;/p></description></item><item><title>访问控制列表</title><link>https://www.kugarocks.com/zh-cn/linux/perm/acl/</link><pubDate>Thu, 29 Aug 2024 20:00:00 +0800</pubDate><guid>https://www.kugarocks.com/zh-cn/linux/perm/acl/</guid><description>&lt;h2 id="acl">ACL&lt;/h2>
&lt;p>访问控制列表（Access Control List）是一种更为灵活和细粒度的权限管理机制，
用于定义和控制文件系统对象的访问权限。与传统的文件权限系统相比，ACL 提供了更细致的权限控制，
允许你为不同的用户和用户组设置特定的权限，不再局限于传统的三个角色（Owner、Group、Others）。&lt;/p>
&lt;h2 id="安装">安装&lt;/h2>
&lt;p>如没安装，可用以下命令。&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-get install acl&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;h2 id="getfacl">getfacl&lt;/h2>
&lt;p>获取文件的访问控制列表&lt;/p>




&lt;div class="expressive-code">
 &lt;figure class="frame not-content">
 &lt;figcaption class="header">
 &lt;span class="title">&lt;/span>
 &lt;/figcaption>
 &lt;div class="highlight" frame="none">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">getfacl - get file access control lists&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 &lt;/figure>
&lt;/div>
&lt;h3 id="使用例子">使用例子&lt;/h3>
&lt;p>获取 foo 文件的 ACL 信息。&lt;/p></description></item></channel></rss>