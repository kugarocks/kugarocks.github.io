<!doctype html><html lang=en data-bs-theme=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://kugarocks.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://kugarocks.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://kugarocks.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><script src=/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg="></script><link rel=stylesheet href="/main.bc29d0e5d874cd852b113a927c4aec1b9af05c2c9dbb62b62591b7f788c4299afc2f02c904a9ab00c79e0394ba151b9b2b21c21cecdb78631ea1d4f2fd75a625.css" integrity="sha512-vCnQ5dh0zYUrETqSfErsG5rwXCydu2K2JZG394jEKZr8LwLJBKmrAMeeA5S6FRubKyHCHOzbeGMeodTy/XWmJQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=https://kugarocks.github.io/en/tech/fourd-pocket/chatgpt-crawler/><link rel=canonical href=https://kugarocks.github.io/en/tech/fourd-pocket/chatgpt-crawler/><link rel=alternate hreflang=zh-hk href=https://kugarocks.github.io/zh-hk/tech/fourd-pocket/chatgpt-crawler/><link rel=alternate hreflang=zh-cn href=https://kugarocks.github.io/zh-cn/tech/fourd-pocket/chatgpt-crawler/><link rel=alternate hreflang=x-default href=https://kugarocks.github.io/zh-cn/tech/fourd-pocket/chatgpt-crawler/><link rel=alternate hreflang=en href=https://kugarocks.github.io/en/tech/fourd-pocket/chatgpt-crawler/><title>Crawler With ChatGPT</title>
<meta name=description content="Congrats on setting up a new Doks project!"><link rel=icon href=/favicon.ico sizes=32x32><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png sizes=180x180 type=image/png><link rel=icon href=/favicon-192x192.png sizes=192x192 type=image/png><link rel=icon href=/favicon-512x512.png sizes=512x512 type=image/png><link rel=manifest href=/manifest.webmanifest><meta property="og:title" content="Crawler With ChatGPT"><meta property="og:description" content="Conversation

🤡：Write a crawler in Python, can input URL
🤖：Gave an example of Beautiful Soup
🤡：How to capture content dynamically generated by JS
🤖：Can use Selenium, Scrapy + Splash
🤡：Method of using Scrapy + Splash
🤖：Here is an example script using Scrapy

After running it, I found that all logs were printed to the screen, so I went to the official website to look at the configuration and found that you can specify the log file, crawl depth, priority, and so on.
I asked GPT again to give some configuration examples and annotations, and finally, after organizing and optimizing, I got the following final input."><meta property="og:type" content="article"><meta property="og:url" content="https://kugarocks.github.io/en/tech/fourd-pocket/chatgpt-crawler/"><meta property="og:image" content="https://kugarocks.github.io/cover.png"><meta property="article:section" content="tech"><meta property="article:published_time" content="2024-07-24T00:00:00+08:00"><meta property="article:modified_time" content="2024-09-08T00:00:00+08:00"><meta property="og:site_name" content="My Docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kugarocks.github.io/cover.png"><meta name=twitter:title content="Crawler With ChatGPT"><meta name=twitter:description content="Conversation

🤡：Write a crawler in Python, can input URL
🤖：Gave an example of Beautiful Soup
🤡：How to capture content dynamically generated by JS
🤖：Can use Selenium, Scrapy + Splash
🤡：Method of using Scrapy + Splash
🤖：Here is an example script using Scrapy

After running it, I found that all logs were printed to the screen, so I went to the official website to look at the configuration and found that you can specify the log file, crawl depth, priority, and so on.
I asked GPT again to give some configuration examples and annotations, and finally, after organizing and optimizing, I got the following final input."><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://kugarocks.github.io/en/","name":"Mini Rocks","position":1},{"@type":"ListItem","item":"https://kugarocks.github.io/en/tech/","name":"Tech","position":2},{"@type":"ListItem","item":"https://kugarocks.github.io/en/tech/fourd-pocket/","name":"Four D Pocket","position":3},{"@type":"ListItem","name":"Crawler With Chat Gpt","position":4}]}</script></head><body class="single section tech" data-bs-spy=scroll data-bs-target=#toc data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll=true tabindex=0><div class=sticky-top><header class="navbar navbar-expand-lg"><div class=container-lg><a class="navbar-brand me-auto me-lg-3" href=/en/>kugarocks</a>
<button type=button id=searchToggleMobile class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
<svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
</button>
<button class="btn btn-link d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavSection aria-controls=offcanvasNavSection aria-label="Open section navigation menu"><svg class="icon icon-tabler icon-tabler-dots-vertical" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M12 5m-1 0a1 1 0 102 0 1 1 0 10-2 0"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasNavSection aria-labelledby=offcanvasNavSectionLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavSectionLabel>Tech</h5><button type=button class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss=offcanvas aria-label=Close><svg class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><nav class="section-nav docs-links"><ul class=list-unstyled><li><a href=/en/tech/readme/>README</a></li><li><details open><summary>Dev Env</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/dev-env/macos/>MacOS</a></li><li><a href=/en/tech/dev-env/zshrc/>zshrc</a></li></ul></details></li><li><details open open><summary>Four-D Pocket</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/fourd-pocket/homebrew/>Homebrew</a></li><li class=active><a aria-current=page href=/en/tech/fourd-pocket/chatgpt-crawler/>Crawler With ChatGPT</a></li><li><a href=/en/tech/fourd-pocket/old-macos/>Install Old macOS</a></li><li><a href=/en/tech/fourd-pocket/useful-tool/>Useful Tools</a></li><li><a href=/en/tech/fourd-pocket/act-tpl/>Setup Activity Template</a></li><li><a href=/en/tech/fourd-pocket/shadow-install/>Shadow Build & Install</a></li></ul></details></li><li><details open><summary>Cursor</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/cursor/prompt/>Prompt</a></li></ul></details></li></ul></nav></nav></aside></div></div><button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavMain aria-controls=offcanvasNavMain aria-label="Open main navigation menu"><svg class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><div class="offcanvas offcanvas-end h-auto" tabindex=-1 id=offcanvasNavMain aria-labelledby=offcanvasNavMainLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavMainLabel>kugarocks</h5><button type=button class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss=offcanvas aria-label=Close><svg class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class="offcanvas-body d-flex flex-column flex-lg-row justify-content-between"><ul class="navbar-nav flex-grow-1"><li class=nav-item><a class="nav-link active" href=https://kugarocks.github.io/en/tech/readme/ aria-current=true>Tech</a></li><li class=nav-item><a class=nav-link href=https://kugarocks.github.io/en/linux/readme/>Linux</a></li><li class=nav-item><a class=nav-link href=https://kugarocks.github.io/en/toys/readme/>Toys</a></li><li class=nav-item><a class=nav-link href=https://kugarocks.github.io/en/about/>About</a></li></ul><button type=button id=searchToggleDesktop class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Search website"><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button><div class="dropdown mt-1 order-lg-2"><button class="btn btn-dropdown dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
<span class=dropdown-caret><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c0 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<span id=doks-language-current>English</span><svg class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6 6-6"/></svg></span></button><ul class="dropdown-menu dropdown-menu-lg-end me-lg-2 shadow rounded border-0" aria-labelledby=doks-languages><li><span class="dropdown-item current" aria-current=true>English</span></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/zh-cn/tech/fourd-pocket/chatgpt-crawler/ hreflang=zh-cn lang=zh-cn>简体中文</a></li><li><a class=dropdown-item rel=alternate href=/zh-hk/tech/fourd-pocket/chatgpt-crawler/ hreflang=zh-hk lang=zh-hk>繁体中文(香港)</a></li></ul></div><button id=buttonColorMode class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type=button aria-label="Toggle theme"><svg data-bs-theme-value="dark" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg><svg data-bs-theme-value="light" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg></button><ul id=socialMenu class="nav mx-auto flex-row order-lg-4"><li class=nav-item><a class="nav-link social-link" href=https://github.com/kugarocks><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><small class="ms-2 visually-hidden">GitHub</small></a></li></ul></div></div></div></header></div><div class=modal id=searchModal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-fullscreen-md-down"><div class=modal-content><div class=modal-header><h1 class="modal-title fs-5 visually-hidden" id=searchModalLabel>Search</h1><button type=button class="btn-close visually-hidden" data-bs-dismiss=modal aria-label=Close></button><div class="search-input flex-grow-1 d-none"><form id=search-form class=search-form action=# method=post accept-charset=UTF-8 role=search><label for=query class=visually-hidden>Search</label><div class=d-flex><input type=search id=query name=query class="search-text form-control form-control-lg" placeholder=Search aria-label=Search maxlength=128 autocomplete=off>
<button type=button class="btn btn-link text-decoration-none px-0 ms-3 d-md-none" data-bs-dismiss=modal aria-label=Close>Cancel</button></div></form></div></div><div class=modal-body><p class="search-loading status message d-none mt-3 text-center">Loading search index…</p><p class="search-no-recent message d-none mt-3 text-center">No recent searches</p><p class="search-no-results message d-none mt-3 text-center">No results for "<strong><span class=query-no-results>Query here</span></strong>"</p><div id=searchResults class=search-results></div><template><article class="search-result list-view"><div class="card my-3"><div class=card-body><header><h2 class="h5 title title-submitted mb-0"><a class="stretched-link text-decoration-none text-reset" href=#>Title here</a></h2><div class="submitted d-none"><time class=created-date>Date here</time></div></header><div class=content>Summary here</div></div></div></article></template></div><div class=modal-footer><ul class="list-inline me-auto d-none d-md-block"><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd><span class=DocSearch-Label>to select</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd><kbd class=me-2><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd><span class=DocSearch-Label>to navigate</span></li><li class=list-inline-item><kbd class=me-2><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd><span class=DocSearch-Label>to close</span></li></ul><p class=d-md-none>Search by <a class=text-decoration-none href=https://github.com/nextapps-de/flexsearch>FlexSearch</a></p></div></div></div></div><div class="wrap container-lg" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class="section-nav docs-links"><ul class=list-unstyled><li><a href=/en/tech/readme/>README</a></li><li><details open><summary>Dev Env</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/dev-env/macos/>MacOS</a></li><li><a href=/en/tech/dev-env/zshrc/>zshrc</a></li></ul></details></li><li><details open open><summary>Four-D Pocket</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/fourd-pocket/homebrew/>Homebrew</a></li><li class=active><a aria-current=page href=/en/tech/fourd-pocket/chatgpt-crawler/>Crawler With ChatGPT</a></li><li><a href=/en/tech/fourd-pocket/old-macos/>Install Old macOS</a></li><li><a href=/en/tech/fourd-pocket/useful-tool/>Useful Tools</a></li><li><a href=/en/tech/fourd-pocket/act-tpl/>Setup Activity Template</a></li><li><a href=/en/tech/fourd-pocket/shadow-install/>Shadow Build & Install</a></li></ul></details></li><li><details open><summary>Cursor</summary><ul class="list-unstyled list-nested"><li><a href=/en/tech/cursor/prompt/>Prompt</a></li></ul></details></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=toc><ul><li><a href=#conversation>Conversation</a><ul><li><a href=#create-a-scrapy-project>Create a Scrapy Project</a></li><li><a href=#run-splash-in-docker>Run Splash in Docker</a></li><li><a href=#modify-settingspy>Modify settings.py</a></li><li><a href=#create-a-spider>Create a Spider</a></li><li><a href=#run-the-spider>Run the Spider</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Crawler With ChatGPT</h1><nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation"><details><summary>On this page</summary><div class=page-links><nav id=TableOfContents><ul><li><a href=#conversation>Conversation</a><ul><li><a href=#create-a-scrapy-project>Create a Scrapy Project</a></li><li><a href=#run-splash-in-docker>Run Splash in Docker</a></li><li><a href=#modify-settingspy>Modify settings.py</a></li><li><a href=#create-a-spider>Create a Spider</a></li><li><a href=#run-the-spider>Run the Spider</a></li></ul></li><li><a href=#summary>Summary</a></li></ul></nav></div></details></nav><h2 id=conversation>Conversation<a href=#conversation class=anchor aria-hidden=true>#</a></h2><ul><li>🤡：Write a crawler in Python, can input URL</li><li>🤖：Gave an example of Beautiful Soup</li><li>🤡：How to capture content dynamically generated by JS</li><li>🤖：Can use Selenium, Scrapy + Splash</li><li>🤡：Method of using Scrapy + Splash</li><li>🤖：Here is an example script using Scrapy</li></ul><p>After running it, I found that all logs were printed to the screen, so I went to the official website to look at the configuration and found that you can specify the log file, crawl depth, priority, and so on.
I asked GPT again to give some configuration examples and annotations, and finally, after organizing and optimizing, I got the following final input.</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>Write a python crawler script
</span></span><span class=line><span class=cl>- A total of 4 input parameters
</span></span><span class=line><span class=cl>- The 1st parameter: the URL to start crawling
</span></span><span class=line><span class=cl>- The 2nd parameter: the keyword to match, supports multiple
</span></span><span class=line><span class=cl>- The 3rd parameter: sets the AND or OR relationship for multiple keywords
</span></span><span class=line><span class=cl>- The 4th parameter: sets the depth of the crawler
</span></span><span class=line><span class=cl>- When a webpage successfully matches multiple keywords, only record once
</span></span><span class=line><span class=cl>- Output the URL of the matched content to the screen, one per line
</span></span><span class=line><span class=cl>- Using splash and scrapy technology
</span></span><span class=line><span class=cl>- The scrapy project name is mycrawler
</span></span><span class=line><span class=cl>- The scrapy log level is INFO, the log file is spider.log
</span></span><span class=line><span class=cl>- The scrapy configuration is placed separately in settings.py
</span></span><span class=line><span class=cl>- settings.py adds related configurations for crawl depth
</span></span><span class=line><span class=cl>- Each configuration in settings.py adds Chinese annotations
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>## ChatGPT Answer
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Below is ChatGPT&#39;s response, but I made some modifications and optimizations.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### Install Splash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>安装 Scrapy-Splash 以及 Splash 服务：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>```bash {frame=&#34;none&#34;}
</span></span><span class=line><span class=cl>pip install scrapy scrapy-splash</span></span></code></pre></div></figure></div><h3 id=create-a-scrapy-project>Create a Scrapy Project<a href=#create-a-scrapy-project class=anchor aria-hidden=true>#</a></h3><p>First, create a new Scrapy project in the command line:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scrapy startproject mycrawler</span></span></code></pre></div></figure></div><h3 id=run-splash-in-docker>Run Splash in Docker<a href=#run-splash-in-docker class=anchor aria-hidden=true>#</a></h3><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -p 8050:8050 scrapinghub/splash</span></span></code></pre></div></figure></div><h3 id=modify-settingspy>Modify settings.py<a href=#modify-settingspy class=anchor aria-hidden=true>#</a></h3><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># -*- coding: utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Scrapy settings for mycrawler project</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>BOT_NAME</span> <span class=o>=</span> <span class=s1>&#39;mycrawler&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SPIDER_MODULES</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;mycrawler.spiders&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>NEWSPIDER_MODULE</span> <span class=o>=</span> <span class=s1>&#39;mycrawler.spiders&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用 Splash 渲染 JavaScript 页面</span>
</span></span><span class=line><span class=cl><span class=n>SPLASH_URL</span> <span class=o>=</span> <span class=s1>&#39;http://localhost:8050&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DOWNLOADER_MIDDLEWARES</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;scrapy_splash.SplashCookiesMiddleware&#39;</span><span class=p>:</span> <span class=mi>723</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;scrapy_splash.SplashMiddleware&#39;</span><span class=p>:</span> <span class=mi>725</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware&#39;</span><span class=p>:</span> <span class=mi>810</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>SPIDER_MIDDLEWARES</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;scrapy_splash.SplashDeduplicateArgsMiddleware&#39;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DUPEFILTER_CLASS</span> <span class=o>=</span> <span class=s1>&#39;scrapy_splash.SplashAwareDupeFilter&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Crawl depth settings</span>
</span></span><span class=line><span class=cl><span class=n>DEPTH_LIMIT</span> <span class=o>=</span> <span class=mi>3</span>  <span class=c1># Set the crawl depth limit</span>
</span></span><span class=line><span class=cl><span class=c1># Depth of each crawl</span>
</span></span><span class=line><span class=cl><span class=n>DEPTH_STATS</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># Enable depth statistics</span>
</span></span><span class=line><span class=cl><span class=c1># Enable crawl depth statistics</span>
</span></span><span class=line><span class=cl><span class=n>DEPTH_PRIORITY</span> <span class=o>=</span> <span class=mi>1</span>  <span class=c1># Enable crawl depth priority</span>
</span></span><span class=line><span class=cl><span class=c1># Set crawl depth priority, 1 indicates depth-first, -1 indicates breadth-first</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Log settings</span>
</span></span><span class=line><span class=cl><span class=n>LOG_LEVEL</span> <span class=o>=</span> <span class=s1>&#39;INFO&#39;</span>  <span class=c1># Log level</span>
</span></span><span class=line><span class=cl><span class=c1># Set the log recording level to INFO</span>
</span></span><span class=line><span class=cl><span class=n>LOG_FILE</span> <span class=o>=</span> <span class=s1>&#39;spider.log&#39;</span>  <span class=c1># Log file</span>
</span></span><span class=line><span class=cl><span class=c1># Specify the path of the log file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Other configurations</span>
</span></span><span class=line><span class=cl><span class=n>ROBOTSTXT_OBEY</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># Obey robots.txt rules</span>
</span></span><span class=line><span class=cl><span class=c1># Whether the spider obeys robots.txt rules, default is True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set User-Agent, simulating common browsers</span>
</span></span><span class=line><span class=cl><span class=c1>#USER_AGENT = &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#39;</span></span></span></code></pre></div></figure></div><h3 id=create-a-spider>Create a Spider<a href=#create-a-spider class=anchor aria-hidden=true>#</a></h3><p>Create a new spider file <code>my_spider.py</code> in the <code>mycrawler/spiders</code> directory with the following content:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>scrapy</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scrapy_splash</span> <span class=kn>import</span> <span class=n>SplashRequest</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MySpider</span><span class=p>(</span><span class=n>scrapy</span><span class=o>.</span><span class=n>Spider</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;my_spider&#34;</span>  <span class=c1># Define the name of the spider</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>start_url</span><span class=p>,</span> <span class=n>keywords</span><span class=p>,</span> <span class=n>logic</span><span class=p>,</span> <span class=n>depth</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>MySpider</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>start_urls</span> <span class=o>=</span> <span class=p>[</span><span class=n>start_url</span><span class=p>]</span>  <span class=c1># Initialize the starting URL to be crawled</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>keywords</span> <span class=o>=</span> <span class=n>keywords</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)</span>  <span class=c1># Split the keyword string into a list</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logic</span> <span class=o>=</span> <span class=n>logic</span>  <span class=c1># Set the logical relationship of keyword matching (and/or relationship)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>custom_settings</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;DEPTH_LIMIT&#39;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>depth</span><span class=p>)}</span>  <span class=c1># Set the crawl depth limit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>start_requests</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Generate initial requests</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>url</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>start_urls</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>SplashRequest</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;wait&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># Parse the response content</span>
</span></span><span class=line><span class=cl>        <span class=c1># Get the page text and convert it to lowercase</span>
</span></span><span class=line><span class=cl>        <span class=n>page_text</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1># Check if each keyword appears in the page text</span>
</span></span><span class=line><span class=cl>        <span class=n>matches</span> <span class=o>=</span> <span class=p>[</span><span class=n>kw</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>page_text</span> <span class=k>for</span> <span class=n>kw</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>keywords</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Determine if the match is successful based on the logical relationship</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>logic</span> <span class=o>==</span> <span class=s1>&#39;and&#39;</span> <span class=ow>and</span> <span class=nb>all</span><span class=p>(</span><span class=n>matches</span><span class=p>))</span> <span class=ow>or</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>logic</span> <span class=o>==</span> <span class=s1>&#39;or&#39;</span> <span class=ow>and</span> <span class=nb>any</span><span class=p>(</span><span class=n>matches</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>            <span class=c1># Record the matching URL</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Matched URL: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>url</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Get all the links on the page and crawl recursively</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>next_page</span> <span class=ow>in</span> <span class=n>response</span><span class=o>.</span><span class=n>css</span><span class=p>(</span><span class=s1>&#39;a::attr(href)&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>getall</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>next_page</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>yield</span> <span class=n>SplashRequest</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>urljoin</span><span class=p>(</span><span class=n>next_page</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;wait&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>})</span></span></span></code></pre></div></figure></div><h3 id=run-the-spider>Run the Spider<a href=#run-the-spider class=anchor aria-hidden=true>#</a></h3><p>Run the spider using the command line:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight frame=none><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scrapy crawl my_spider -a <span class=nv>start_url</span><span class=o>=</span><span class=s1>&#39;http://example.com&#39;</span> -a <span class=nv>keywords</span><span class=o>=</span><span class=s1>&#39;keyword1,keyword2&#39;</span> -a <span class=nv>logic</span><span class=o>=</span><span class=s1>&#39;and&#39;</span> -a <span class=nv>depth</span><span class=o>=</span><span class=m>3</span></span></span></code></pre></div></figure></div><p>This script will crawl the web pages, match the keywords, and output the matching URLs based on the input parameters.</p><h2 id=summary>Summary<a href=#summary class=anchor aria-hidden=true>#</a></h2><p>ChatGPT is more like a guiding role.
Sometimes you need a tool, maybe you don&rsquo;t know what this tool will look like in the end.
But as long as you keep talking, step by step, he can always give you the answer you want.
This process can also learn a lot of things, as long as you know how to ask questions.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="page-nav d-flex flex-column flex-sm-row"><div class="card w-100"><div class="card-body d-flex"><div class="d-flex flex-column justify-content-center"><svg class="icon icon-tabler icon-tabler-arrow-left" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M5 12l6 6"/><path d="M5 12l6-6"/></svg></div><div class="d-flex flex-column"><div class=text-body-secondary>Prev</div><a href=/en/tech/fourd-pocket/homebrew/ class="stretched-link text-reset text-decoration-none">Homebrew</a></div></div></div><div class=m-2></div><div class="card text-end w-100"><div class="card-body d-flex justify-content-end"><div class="d-flex flex-column"><div class=text-body-secondary>Next</div><a href=/en/tech/fourd-pocket/old-macos/ class="stretched-link text-reset text-decoration-none">Install Old macOS</a></div><div class="d-flex flex-column justify-content-center"><svg class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M13 18l6-6"/><path d="M13 6l6 6"/></svg></div></div></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-lg><div class=row><div class="col-lg-8 text-center text-lg-start"><ul class=list-inline><li class=list-inline-item><a class=text-muted href=https://beian.miit.gov.cn/>粤ICP备2024312555号-1</a></li></ul></div><div class="col-lg-8 text-center text-lg-end"><ul class=list-inline><li class=list-inline-item>Brought to you by <a class=text-muted href=https://thulite.io/>Thulite</a></li></ul></div></div></div></footer><script async src=/js/app.c17553444ec7c62f781ddbaa011948f6d85a1bab49420047d68a2b89852a8b36.js integrity="sha256-wXVTRE7Hxi94HduqARlI9thaG6tJQgBH1ooriYUqizY="></script><script async src=/js/flexsearch.en.8f9113291e072f5d0074cc2b714e01be1d0d0e9f3fecfc7f8a004d30f06ee98e.js integrity="sha256-j5ETKR4HL10AdMwrcU4Bvh0NDp8/7Px/igBNMPBu6Y4="></script><script async src=/js/search-modal.0415aa45353ab123a509f6ddc6861549ece898b90872fcf757cd2663041dac96.js integrity="sha256-BBWqRTU6sSOlCfbdxoYVSezomLkIcvz3V80mYwQdrJY="></script></body></html>