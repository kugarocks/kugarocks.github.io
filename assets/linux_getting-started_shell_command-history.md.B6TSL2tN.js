import{_ as s,c as e,o as a,ah as t}from"./chunks/framework.HzbgFGQH.js";const k=JSON.parse('{"title":"Command History","description":"","frontmatter":{},"headers":[],"relativePath":"linux/getting-started/shell/command-history.md","filePath":"en/linux/getting-started/shell/command-history.md","lastUpdated":1746727745000}'),h={name:"linux/getting-started/shell/command-history.md"};function l(n,i,r,o,d,c){return a(),e("div",null,i[0]||(i[0]=[t('<h1 id="command-history" tabindex="-1">Command History <a class="header-anchor" href="#command-history" aria-label="Permalink to “Command History”">​</a></h1><h2 id="the-mysterious-a" tabindex="-1">The Mysterious ^[[A <a class="header-anchor" href="#the-mysterious-a" aria-label="Permalink to “The Mysterious ^[[A”">​</a></h2><p>First, start a new Shell <code>/bin/sh</code>.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/bin/sh</span></span></code></pre></div><p>Then enter the following command, everything is normal.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span></span></code></pre></div><p>Press the up arrow key ⬆️ to view the previous command.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">^[[A</span></span></code></pre></div><p>You will find that you cannot see the previous command, instead, these characters <code>^[[A</code> appear. This is because early sh did not support viewing command history, until bash added this feature.</p><h3 id="ansi-escape-sequences" tabindex="-1">ANSI Escape Sequences <a class="header-anchor" href="#ansi-escape-sequences" aria-label="Permalink to “ANSI Escape Sequences”">​</a></h3><p><code>^[[A</code> is an ANSI escape sequence, indicating the up arrow key.</p><ul><li><code>^[</code>：represents the <code>Esc</code> key (ASCII code 27), which is the start of the escape sequence.</li><li><code>[A</code>：represents the specific operation, <code>[A</code> indicates the up arrow key.</li></ul><p>When you press the up arrow key in the terminal, the terminal sends this character sequence <code>^[[A</code> to the program, usually used to call the previous command in the command history. Since sh does not support viewing command history, it will output the character sequence of the key directly.</p><h3 id="sh-in-ubuntu" tabindex="-1">sh in Ubuntu <a class="header-anchor" href="#sh-in-ubuntu" aria-label="Permalink to “sh in Ubuntu”">​</a></h3><p>In Ubuntu, sh is actually a link to dash.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/sh</span></span></code></pre></div><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/bin/sh:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> symbolic</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dash</span></span></code></pre></div><p>Therefore, dash also does not support viewing command history.</p><h2 id="history-functionality" tabindex="-1">History Functionality <a class="header-anchor" href="#history-functionality" aria-label="Permalink to “History Functionality”">​</a></h2><h3 id="history-command" tabindex="-1">history Command <a class="header-anchor" href="#history-command" aria-label="Permalink to “history Command”">​</a></h3><p>Without arguments, it outputs all history records.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">history</span></span></code></pre></div><p>You can also use the short command, with the same effect.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!!</span></span></code></pre></div><h3 id="bash-history-file" tabindex="-1">.bash_history File <a class="header-anchor" href="#bash-history-file" aria-label="Permalink to “.bash_history File”">​</a></h3><p>The persistent file for command history records.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-rw-------</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kuga</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kuga</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5516</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Aug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 08:23</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /home/kuga/.bash_history</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> foofffffffffffffffffffffffffffffffffff</span></span></code></pre></div><p>During the interaction with the Shell, the history records of the commands are saved in memory. Using the <code>history</code> command can view the changes of the history records in real-time, but the history records are only written to the <code>.bash_history</code> file when you exit the Shell. If you want to write to the history record file immediately, you can use the following command.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">history</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span></code></pre></div><h2 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to “Environment Variables”">​</a></h2><h3 id="histfile" tabindex="-1">HISTFILE <a class="header-anchor" href="#histfile" aria-label="Permalink to “HISTFILE”">​</a></h3><p>The path of the history record file.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HISTFILE</span></span></code></pre></div><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home/kuga/.bash_history</span></span></code></pre></div><h3 id="histfilesize" tabindex="-1">HISTFILESIZE <a class="header-anchor" href="#histfilesize" aria-label="Permalink to “HISTFILESIZE”">​</a></h3><p>The size of the history record file.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HISTFILESIZE</span></span></code></pre></div><div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>2000</span></span></code></pre></div><h3 id="histsize" tabindex="-1">HISTSIZE <a class="header-anchor" href="#histsize" aria-label="Permalink to “HISTSIZE”">​</a></h3><p>The size of the history record list in memory.</p><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HISTSIZE</span></span></code></pre></div><div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>1000</span></span></code></pre></div>',42)]))}const g=s(h,[["render",l]]);export{k as __pageData,g as default};
